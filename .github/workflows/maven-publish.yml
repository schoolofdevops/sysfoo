on:
  push:
    branches:
      - feature/tomcatdeploy
jobs:
  build-and-publish:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout project
      uses: actions/checkout@v3
    - name: Setup Java JDK
      uses: actions/setup-java@v3
      with:
        java-version: '11'                    
        server-id: github 
        distribution: 'temurin'
    - name: Configure Git user
      run: |
       git config --global user.email "anushamadhala678@gmail.com"
       git config --global user.name "anushamadhala678"
       
    - name: build
      run: |
       mvn -f pom.xml -B clean package   
       mvn install -pl ${{ github.workspace }}

    - name: Publish war
      run: mvn -B release:prepare release:perform
      env:
       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
